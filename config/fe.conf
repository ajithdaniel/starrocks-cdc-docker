# =============================================================================
# StarRocks Frontend (FE) Configuration - Shared-Data Mode
# =============================================================================

# -----------------------------------------------------------------------------
# Basic Configuration
# -----------------------------------------------------------------------------
LOG_DIR = ${STARROCKS_HOME}/log
DATE = "$(date +%Y%m%d-%H%M%S)"
JAVA_OPTS="-Dlog4j2.formatMsgNoLookups=true -Xmx4096m -XX:+UseG1GC"

# HTTP server port
http_port = 8030

# RPC port
rpc_port = 9020

# MySQL protocol port
query_port = 9030

# Metadata edit log port
edit_log_port = 9010

# -----------------------------------------------------------------------------
# Shared-Data Mode Configuration (CRITICAL)
# -----------------------------------------------------------------------------
run_mode = shared_data

# Cloud-native metadata port
cloud_native_meta_port = 6090

# -----------------------------------------------------------------------------
# Object Storage Configuration (MinIO/S3)
# -----------------------------------------------------------------------------
cloud_native_storage_type = S3

# MinIO/S3 path for StarRocks data
aws_s3_path = starrocks/data

# MinIO endpoint (internal Docker network)
aws_s3_endpoint = http://minio:9000

# MinIO region (required even for MinIO)
aws_s3_region = us-east-1

# MinIO credentials
aws_s3_access_key = minioadmin
aws_s3_secret_key = minioadmin123

# Use path-style access (required for MinIO)
aws_s3_use_aws_sdk_default_behavior = false

# -----------------------------------------------------------------------------
# Metadata Configuration
# -----------------------------------------------------------------------------
meta_dir = ${STARROCKS_HOME}/meta

# Default replication for internal metadata
default_replication_num = 1

# -----------------------------------------------------------------------------
# Query Configuration
# -----------------------------------------------------------------------------
# Enable CBO optimizer
enable_cbo = true

# Query timeout (5 minutes)
query_timeout = 300

# Enable vectorized engine
enable_vectorized_engine = true

# -----------------------------------------------------------------------------
# Load Configuration
# -----------------------------------------------------------------------------
# Stream load timeout
stream_load_default_timeout_second = 600

# Max stream load batch size
max_stream_load_batch_size_mb = 100

# Routine load configurations
max_routine_load_task_num_per_be = 16
max_routine_load_batch_size = 4294967296

# -----------------------------------------------------------------------------
# Compaction Configuration (Important for CDC)
# -----------------------------------------------------------------------------
# Lake (shared-data) compaction settings
lake_compaction_score_upper_bound = 2000
lake_ingest_slowdown_threshold = 100

# -----------------------------------------------------------------------------
# Primary Key Table Configuration
# -----------------------------------------------------------------------------
# Enable persistent index by default for new tables
enable_persistent_index = true

# -----------------------------------------------------------------------------
# System Configuration
# -----------------------------------------------------------------------------
# Priority networks for internal communication
priority_networks = 172.16.0.0/12;192.168.0.0/16;10.0.0.0/8

# Sys log level
sys_log_level = DEBUG

# Enable profile for debugging
enable_profile = true

# Audit log
audit_log_dir = ${STARROCKS_HOME}/log

# Enable verbose logging
sys_log_verbose_modules = *
